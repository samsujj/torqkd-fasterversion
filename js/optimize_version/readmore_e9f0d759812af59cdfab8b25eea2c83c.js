var readMore=angular.module('readMore',[]);readMore.directive('readMore',function(){return{restrict:'AE',replace:true,scope:{text:'=ngModel'},template:"<p> {{text | readMoreFilter:[text, countingWords, textLength] }}"+"<a ng-show='showLinks' ng-click='changeLength()' class='color3'>"+"<strong ng-show='isExpanded'>  << Close</strong>"+"<strong ng-show='!isExpanded'>  More >></strong>"+"</a>"+"</p>",controller:['$scope','$attrs','$element',function($scope,$attrs){$scope.textLength=$attrs.length;$scope.isExpanded=false;$scope.countingWords=$attrs.words!==undefined?($attrs.words==='true'):true;if(!$scope.countingWords&&$scope.text.length>$attrs.length){$scope.showLinks=true;}else if($scope.countingWords&&$scope.text.split(" ").length>$attrs.length){$scope.showLinks=true;}else{$scope.showLinks=false;}
$scope.changeLength=function(card){$scope.isExpanded=!$scope.isExpanded;$scope.textLength=$scope.textLength!==$attrs.length?$attrs.length:$scope.text.length;};}]};});readMore.filter('readMoreFilter',function(){return function(str,args){var strToReturn=str,length=str.length,foundWords=[],countingWords=(!!args[1]);if(!str||str===null){console.log("Warning: Truncating text was not performed as no text was specified");}
if(!args[2]||args[2]===null){console.log("Warning: Truncating text was not performed as no length was specified");}else if(typeof args[2]!=="number"){length=Number(args[2]);}
if(length<=0){return"";}
if(str){if(countingWords){foundWords=str.split(/\s+/);if(foundWords.length>length){strToReturn=foundWords.slice(0,length).join(' ')+'...';}}else{if(str.length>length){strToReturn=str.slice(0,length)+'...';}}}
return strToReturn;};});